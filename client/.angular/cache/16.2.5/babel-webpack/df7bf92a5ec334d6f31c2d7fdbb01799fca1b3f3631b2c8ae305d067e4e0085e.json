{"ast":null,"code":"import { NgForOf, NgIf, NgStyle } from \"@angular/common\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../../../services/BracketService\";\nimport * as i2 from \"../../../../../util/JwtUtil\";\nimport * as i3 from \"../../../../../services/TeamService\";\nfunction BracketComponent_ng_container_0_div_3_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 9);\n  }\n}\nfunction BracketComponent_ng_container_0_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7);\n    i0.ɵɵtemplate(1, BracketComponent_ng_container_0_div_3_div_1_Template, 1, 0, \"div\", 8);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const stage_r4 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", stage_r4.matches);\n  }\n}\nfunction BracketComponent_ng_container_0_p_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"Winner\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction BracketComponent_ng_container_0_p_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r3.winner == null ? null : ctx_r3.winner.name);\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"width\": a0\n  };\n};\nfunction BracketComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 1)(2, \"div\", 2);\n    i0.ɵɵtemplate(3, BracketComponent_ng_container_0_div_3_Template, 2, 1, \"div\", 3);\n    i0.ɵɵelementStart(4, \"div\", 4)(5, \"div\", 5)(6, \"div\", 6);\n    i0.ɵɵtemplate(7, BracketComponent_ng_container_0_p_7_Template, 2, 0, \"p\", 0);\n    i0.ɵɵtemplate(8, BracketComponent_ng_container_0_p_8_Template, 2, 1, \"p\", 0);\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(4, _c0, 30 * (ctx_r0.bracket.stages.length + 1) + \"vw\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.bracket.stages);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.winnerId == 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.winnerId != 0);\n  }\n}\nexport class BracketComponent {\n  constructor(bracketService, jwtUtil, teamService) {\n    this.bracketService = bracketService;\n    this.jwtUtil = jwtUtil;\n    this.teamService = teamService;\n    this.role = this.jwtUtil.getRole();\n    this.userId = this.jwtUtil.getId();\n  }\n  ngOnInit() {\n    this.bracketService.findBracket(this.bracketId).subscribe(value => {\n      this.bracket = value;\n    });\n    if (this.winnerId != 0) this.teamService.findById(this.winnerId).subscribe(value => {\n      this.winner = value;\n    });\n  }\n  teamWon(teamId, bracketId, matchId, stageId) {\n    console.log('team.id:', teamId);\n    console.log('match.id:', matchId);\n    console.log('bracket.id:', bracketId);\n    console.log('stage.id:', stageId);\n    this.bracketService.teamWon(teamId, matchId, bracketId, stageId).subscribe(() => {\n      location.reload();\n    });\n  }\n  static #_ = this.ɵfac = function BracketComponent_Factory(t) {\n    return new (t || BracketComponent)(i0.ɵɵdirectiveInject(i1.BracketService), i0.ɵɵdirectiveInject(i2.JwtUtil), i0.ɵɵdirectiveInject(i3.TeamService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: BracketComponent,\n    selectors: [[\"app-bracket\"]],\n    inputs: {\n      bracketId: \"bracketId\",\n      adminId: \"adminId\",\n      winnerId: \"winnerId\"\n    },\n    standalone: true,\n    features: [i0.ɵɵStandaloneFeature],\n    decls: 1,\n    vars: 1,\n    consts: [[4, \"ngIf\"], [1, \"max-w-5/6\", \"w-5/6\", \"overflow-x-scroll\", \"overflow-y-scroll\"], [1, \"self-center\", \"flex\", \"justify-around\", \"items-center\", \"border-2\", \"border-blue-700\", 2, \"max-height\", \"75vh\", \"min-height\", \"75vh\", \"min-width\", \"90vw\", 3, \"ngStyle\"], [\"class\", \"flex flex-col items-center justify-around\", \"style\", \"min-height: 75vh; width: 30vw\", 4, \"ngFor\", \"ngForOf\"], [1, \"flex\", \"flex-col\", \"w-2/5\", \"items-center\", \"justify-center\", 2, \"min-height\", \"75vh\"], [1, \"flex\", \"flex-col\", \"w-80\", \"h-3/5\", \"bg-sky-400\"], [1, \"flex\", \"flex-col\", \"w-full\", \"h-50\"], [1, \"flex\", \"flex-col\", \"items-center\", \"justify-around\", 2, \"min-height\", \"75vh\", \"width\", \"30vw\"], [\"class\", \"flex flex-col w-5/6 h-20 bg-sky-400 \", 4, \"ngFor\", \"ngForOf\"], [1, \"flex\", \"flex-col\", \"w-5/6\", \"h-20\", \"bg-sky-400\"]],\n    template: function BracketComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, BracketComponent_ng_container_0_Template, 9, 6, \"ng-container\", 0);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.bracket);\n      }\n    },\n    dependencies: [NgIf, NgForOf, NgStyle],\n    styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["NgForOf","NgIf","NgStyle","i0","ɵɵelement","ɵɵelementStart","ɵɵtemplate","BracketComponent_ng_container_0_div_3_div_1_Template","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","stage_r4","matches","ɵɵtext","ɵɵtextInterpolate","ctx_r3","winner","name","ɵɵelementContainerStart","BracketComponent_ng_container_0_div_3_Template","BracketComponent_ng_container_0_p_7_Template","BracketComponent_ng_container_0_p_8_Template","ɵɵelementContainerEnd","ɵɵpureFunction1","_c0","ctx_r0","bracket","stages","length","winnerId","BracketComponent","constructor","bracketService","jwtUtil","teamService","role","getRole","userId","getId","ngOnInit","findBracket","bracketId","subscribe","value","findById","teamWon","teamId","matchId","stageId","console","log","location","reload","_","ɵɵdirectiveInject","i1","BracketService","i2","JwtUtil","i3","TeamService","_2","selectors","inputs","adminId","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","BracketComponent_Template","rf","ctx","BracketComponent_ng_container_0_Template","styles"],"sources":["C:\\Users\\Ivan\\java\\final_project\\client\\src\\app\\pages\\open\\tournament\\tournament_page\\bracket\\bracket.component.ts","C:\\Users\\Ivan\\java\\final_project\\client\\src\\app\\pages\\open\\tournament\\tournament_page\\bracket\\bracket.component.html"],"sourcesContent":["import {Component, Input, OnInit} from '@angular/core';\nimport {BracketService} from \"../../../../../services/BracketService\";\nimport {BracketData} from \"../../../../../models/request/BracketData\";\nimport {NgForOf, NgIf, NgStyle} from \"@angular/common\";\nimport {StageData} from \"../../../../../models/request/StageData\";\nimport {last} from \"rxjs\";\nimport {JwtUtil} from \"../../../../../util/JwtUtil\";\nimport {TeamService} from \"../../../../../services/TeamService\";\nimport {TeamData} from \"../../../../../models/request/TeamData\";\n\n@Component({\n  selector: 'app-bracket',\n  standalone: true,\n  templateUrl: './bracket.component.html',\n  imports: [\n    NgIf,\n    NgForOf,\n    NgStyle\n  ],\n  styleUrls: ['./bracket.component.css']\n})\nexport class BracketComponent implements OnInit{\n  @Input() bracketId: number | undefined;\n  @Input() adminId: number | undefined;\n  @Input() winnerId: number | undefined;\n\n  public bracket: BracketData | undefined;\n  public role: string | null = this.jwtUtil.getRole();\n  public userId: number | undefined = this.jwtUtil.getId();\n  public winner: TeamData | undefined;\n\n  constructor(private bracketService: BracketService,\n              private jwtUtil: JwtUtil,\n              private teamService: TeamService,\n              ) {\n  }\n  ngOnInit(): void {\n      this.bracketService.findBracket(this.bracketId).subscribe(value => {\n        this.bracket = value\n      })\n    if (this.winnerId != 0) this.teamService.findById(this.winnerId).subscribe(value => {\n      this.winner = value;\n    });\n  }\n\n  teamWon(teamId: number, bracketId: number, matchId: number | undefined, stageId: number) {\n    console.log('team.id:', teamId);\n    console.log('match.id:', matchId);\n    console.log('bracket.id:', bracketId);\n    console.log('stage.id:', stageId);\n    this.bracketService.teamWon(teamId,matchId,bracketId,stageId).subscribe(\n      () => {\n        location.reload();\n      }\n    );\n  }\n}\n","<ng-container *ngIf=\"bracket\">\n  <div class=\"max-w-5/6 w-5/6 overflow-x-scroll overflow-y-scroll\">\n    <div [ngStyle]=\"{'width': 30 * (bracket.stages.length + 1) + 'vw'}\" class=\"self-center flex justify-around items-center border-2 border-blue-700\" style=\"max-height: 75vh; min-height: 75vh; min-width: 90vw\">\n      <div class=\"flex flex-col items-center justify-around\" style=\"min-height: 75vh; width: 30vw\" *ngFor=\"let stage of bracket.stages\">\n        <div class=\"flex flex-col w-5/6 h-20 bg-sky-400 \" *ngFor=\"let match of stage.matches\">\n\n          \n<!--          <div *ngIf=\"match.teams.length > 1\" class=\"flex flex-col w-full h-50 relative\">-->\n<!--            <i (click)=\"teamWon(team.id, match.matchId, bracket.bracketId, stage.stageId)\" *ngIf=\"role == 'ADMIN' && userId == adminId\" class=\"fa-solid cursor-pointer fa-arrow-right absolute right-2 top-2 text-xl\"></i>-->\n<!--            <div class=\"flex w-full h-full justify-center\">{{ team.name }}</div>-->\n<!--            <div *ngIf=\"!last\" class=\"border-b border-gray-500\"></div>-->\n<!--          </div>-->\n<!--          <div *ngIf=\"match.teams.length == 1\" class=\"flex flex-col w-full h-50 relative\">-->\n<!--            <i (click)=\"teamWon(team.id, match.matchId, bracket.bracketId, stage.stageId)\" *ngIf=\"role == 'ADMIN' && userId == adminId\" class=\"fa-solid cursor-pointer fa-arrow-right absolute right-2 top-2 text-xl\"></i>-->\n<!--            <div class=\"flex w-full h-full justify-center\">{{ team.name }}</div>-->\n<!--            <div class=\"border-b border-gray-500\"></div>-->\n<!--          </div>-->\n<!--          -->\n<!--          <div *ngIf=\"match.teams.length == 0\" class=\"flex items-center justify-center w-full h-full\">-->\n<!--            <div class=\"border-b border-gray-500 w-full\"></div>-->\n<!--          </div>-->\n        </div>\n      </div>\n      <div class=\"flex flex-col w-2/5 items-center justify-center\" style=\"min-height: 75vh\">\n        <div class=\"flex flex-col w-80 h-3/5 bg-sky-400\">\n          <div class=\"flex flex-col w-full h-50\">\n            <p *ngIf=\"winnerId == 0\">Winner</p>\n            <p *ngIf=\"winnerId != 0\">{{winner?.name}}</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</ng-container>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}